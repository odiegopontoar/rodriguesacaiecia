<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login / Cadastro - Rodrigues Açaí e Cia</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyAdJHhFQMhgDC_Q4BXHC4E8HAIne1H7k3A",
  authDomain: "rodriguesacaiecia-165b9.firebaseapp.com",
  projectId: "rodriguesacaiecia-165b9",
  storageBucket: "rodriguesacaiecia-165b9.firebasestorage.app",
  messagingSenderId: "566761430402",
  appId: "1:566761430402:web:a0b8083caa23b4f0ad439b"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// Login Google
window.loginGoogle = async () => {
  try {
    const result = await signInWithPopup(auth, provider);
    const user = result.user;

    // Aqui você verifica se o usuário tem cadastro completo
    // Você pode armazenar em Firestore um campo "cadastroCompleto" por exemplo
    // Simulação: se displayName vazio -> cadastro completo
    if (!user.displayName) {
      alert("Bem-vindo! Complete seu cadastro.");
      window.location.href = "cadastro-completo.html"; // página de cadastro completo
    } else {
      alert(`Bem-vindo de volta, ${user.displayName}!`);
      window.location.href = "index.html"; // página principal
    }
  } catch (error) {
    alert(`Erro: ${error.message}`);
    console.error(error);
  }
};

// Login Email
window.loginEmail = () => {
  const email = document.getElementById('loginEmail').value;
  const senha = document.getElementById('loginSenha').value;
  signInWithEmailAndPassword(auth, email, senha)
    .then(() => window.location.href = "index.html")
    .catch(error => alert(`Erro: ${error.message}`));
};

// Cadastro Email
window.cadastrarEmail = () => {
  const email = document.getElementById('cadEmail').value;
  const senha = document.getElementById('cadSenha').value;
  createUserWithEmailAndPassword(auth, email, senha)
    .then(() => {
      alert('Cadastro básico realizado! Complete seu perfil depois.');
      window.location.href = "cadastro-completo.html";
    })
    .catch(error => alert(`Erro: ${error.message}`));
};

// Alternar abas
window.mudarAba = (aba) => {
  document.getElementById('loginTab').style.display = aba === 'login' ? 'block' : 'none';
  document.getElementById('cadTab').style.display = aba === 'cadastro' ? 'block' : 'none';
  const buttons = document.querySelectorAll('.tabs button');
  buttons.forEach(btn => btn.classList.remove('active'));
  document.querySelector(`.tabs button[onclick="mudarAba('${aba}')"]`).classList.add('active');
};
</script>
<style>
* { box-sizing:border-box; margin:0; padding:0; font-family:Arial,sans-serif; }
body { display:flex; justify-content:center; align-items:center; height:100vh; background:linear-gradient(135deg,#ff8a00,#e52e71);}
.container { background:#fff; padding:40px; border-radius:16px; width:100%; max-width:420px; text-align:center; box-shadow:0 8px 25px rgba(0,0,0,0.2);}
.logo { width:130px; margin-bottom:20px;}
h1 { margin-bottom:20px; color:#333;}
.tabs { display:flex; justify-content:center; margin-bottom:20px; gap:20px;}
.tabs button { background:none; border:none; font-size:16px; cursor:pointer; padding:10px; border-bottom:2px solid transparent; transition:0.3s;}
.tabs button.active { border-bottom:2px solid #6b2c91; font-weight:bold;}
input { width:100%; padding:12px; margin:10px 0; border-radius:8px; border:1px solid #ccc; font-size:16px;}
button.action-btn { width:100%; padding:14px; border:none; border-radius:8px; font-size:16px; margin-top:10px; cursor:pointer; background:#6b2c91; color:#fff; transition:0.3s;}
button.action-btn:hover { background:#7e3cb0;}
button.google-btn { display:flex; justify-content:center; align-items:center; gap:10px; background:#fff; color:#000; padding:12px; border:1px solid #ccc; border-radius:8px; font-size:16px; margin-top:15px; cursor:pointer; transition:0.3s;}
button.google-btn img { width:20px; height:20px;}
button.google-btn:hover { background:#f5f5f5;}
</style>
</head>
<body>
<div class="container">
  <img src="https://i.ibb.co/Zz778TGK/1000254363-removebg-preview.png" alt="Logo Rodrigues Açaí e Cia" class="logo">
  <div class="tabs">
    <button class="active" onclick="mudarAba('login')">Login</button>
    <button onclick="mudarAba('cadastro')">Cadastrar</button>
  </div>

  <!-- Login -->
  <div id="loginTab">
    <input type="email" id="loginEmail" placeholder="Email">
    <input type="password" id="loginSenha" placeholder="Senha">
    <button class="action-btn" onclick="loginEmail()">Entrar</button>
    <button class="google-btn" onclick="loginGoogle()">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="Google Logo"> Entrar com Google
    </button>
  </div>

  <!-- Cadastro -->
  <div id="cadTab" style="display:none;">
    <input type="email" id="cadEmail" placeholder="Email">
    <input type="password" id="cadSenha" placeholder="Senha">
    <button class="action-btn" onclick="cadastrarEmail()">Cadastrar</button>
    <button class="google-btn" onclick="loginGoogle()">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="Google Logo"> Entrar com Google
    </button>
  </div>
</div>
</body>
</html>